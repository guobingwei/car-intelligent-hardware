<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
<div id="app">
    <!--<div class="line"></div>-->
    <el-menu
            :default-active="activeIndex"
            class="el-menu-demo"
            mode="horizontal"
            @select="handleSelect"
            background-color="#545c64"
            text-color="#fff"
            active-text-color="#ffd04b">
        <el-menu-item index="1">实时数据展示</el-menu-item>
        <el-menu-item index="2">历史数据展示</el-menu-item>
        <el-menu-item index="3">汽车之家</el-menu-item>
    </el-menu>

    <!--历史列表：-->
    <br>
    <template id="history_data_list">
        <el-table :data="uploadList" height="250" border id="data_table" style="width: 55%; left: 22%; display: none;flex-flow: column">
            <el-table-column prop="temperatures" label="温度" width="200"></el-table-column>
            <el-table-column prop="back_distance" label="距离" width="200"></el-table-column>
            <el-table-column prop="ctime" label="上报日期"></el-table-column>
        </el-table>
    </template>


    <div id="autocar_data" style="margin-left:  31%; margin-top:  20%; display: flex;">
        <h1 style="color: #ef0b0b;"><span id="temp">温度: {{temperature}} 米</span></h1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <h1 style="color: #47d71e;="><span id="dis">距离：{{ distance }}摄氏度</span></h1>
    </div>

</div>

</body>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>

<!-- axios.js vue官方推荐插件 -->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    var temperature = 'test';

    var vm = new Vue({

        el: '#app',

        data() {
            return {
                temperature:"20",
                distance:'200',
                activeIndex: '1',
                uploadList: [],
                currentData : {}
            };

        },

        methods: {
            handleSelect(index, indexPath) {
                if (index == 1) {
                    console.log(1)
                    document.getElementById("data_table").style.display = "none";
                    document.getElementById("autocar_data").style.display = "flex";
                    vm.currentData.distance = 20;
                    vm.currentData.temperature = 20;
                    console.log(vm.currentData)
                } else if (index == 2) {
                    document.getElementById("autocar_data").style.display = "none";
                    document.getElementById("data_table").style.display = "flex";

                    // ajax
                    axios.get('http://localhost:8080/autocar/upload/list')
                        .then(function (response) {
                            console.log(response);
                            vm.uploadList = response.data.data
                            console.log(vm.uploadList)
                        }).catch(function (error) {
                            console.log(error);
                        });

                } else if (index == 3) {
                    document.getElementById("autocar_data").style.display = "none";
                    document.getElementById("data_table").style.display = "none";
                }
            },
        }
    })
</script>
</html>